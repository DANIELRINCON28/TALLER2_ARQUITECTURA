<!-- 
  PÃ¡gina principal de la aplicaciÃ³n.
  TraducciÃ³n directa de home.php manteniendo la misma estructura y funcionalidad.
-->
{% extends 'orders/base.html' %}

{% block content %}
<!-- Equivalente a: <h1 class="h">MÃ³dulo de Pedidos & Entregas (Starter)</h1> -->
<h1 class="h">ğŸ¯ MÃ³dulo de Pedidos & Entregas con Patrones de DiseÃ±o</h1>
<p class="muted">Sistema <strong>refactorizado</strong> implementando patrones de diseÃ±o segÃºn las directrices del proyecto.</p>

<!-- Nueva secciÃ³n: InformaciÃ³n de Patrones -->
<div class="note" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;">
  <h2 style="color: white; margin-top: 0;">ğŸ”¥ Patrones Implementados</h2>
  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1rem;">
    <div>
      <h3>ğŸ”¨ CREACIONAL: Builder</h3>
      <p>ConstrucciÃ³n compleja de pedidos con validaciones, cÃ¡lculo de peso, generaciÃ³n de cÃ³digos y etiquetas de manejo.</p>
    </div>
    <div>
      <h3>ğŸ”Œ ESTRUCTURAL: Adapter</h3>
      <p>IntegraciÃ³n unificada con APIs heterogÃ©neas de proveedores (MotoYA, EcoBike, PaqueterÃ­aZ).</p>
    </div>
    <div>
      <h3>ğŸ“Š COMPORTAMENTAL: Strategy</h3>
      <p>SelecciÃ³n inteligente de proveedores con 3 estrategias: EstÃ¡ndar, EcolÃ³gica y Optimizada por Costo.</p>
    </div>
    <div>
      <h3>ğŸ”” COMPORTAMENTAL: Observer</h3>
      <p>Sistema de notificaciones automÃ¡ticas multi-canal: Email, Webhook y SMS.</p>
    </div>
  </div>
  <p style="margin-bottom: 0;"><strong>âœ¨ Flujo completo:</strong> Al crear un pedido se ejecutan los 4 patrones automÃ¡ticamente segÃºn las directrices.</p>
</div>

<!-- Equivalente a: <h2 class="hh">Productos</h2> -->
<h2 class="hh">Productos</h2>
<ul class="list">
  <!-- Equivalente a: <?php foreach ($products as $p): ?> -->
  {% for product in products %}
    <li class="list-item">
      <!-- Equivalente a: <strong><?= htmlspecialchars($p['name']) ?></strong> <span class="muted">(<?= (int)$p['weight_grams'] ?> g)</span> -->
      <strong>{{ product.name }}</strong> 
      <span class="muted">({{ product.weight_grams }} g)</span>
    </li>
  {% endfor %}
</ul>

<!-- Equivalente a: <h2 class="hh">Pedidos recientes</h2> -->
<h2 class="hh">Pedidos recientes</h2>
<!-- Equivalente a: <?php if (empty($recent)): ?> -->
{% if not recent %}
  <p class="muted">AÃºn no hay pedidos.</p>
{% else %}
  <ul class="list">
    <!-- Equivalente a: <?php foreach ($recent as $o): ?> -->
    {% for order in recent %}
      <li class="list-item">
        <!-- 
          Equivalente a: 
          <span>#<?= (int)$o['id'] ?> â€¢ <?= htmlspecialchars($o['customer_email']) ?> â€¢ 
          <?= htmlspecialchars($o['priority']) ?> â€¢ peso <?= (int)$o['total_weight'] ?> g</span>
        -->
        <span>#{{ order.id }} â€¢ {{ order.customer_email }} â€¢ {{ order.priority }} â€¢ peso {{ order.total_weight }} g</span>
        
        <!-- Equivalente a: <a class="chip" href="?r=order/show&id=<?= (int)$o['id'] ?>">ver</a> -->
        <a class="chip" href="{% url 'order_show' order.id %}">ver</a>
      </li>
    {% endfor %}
  </ul>
{% endif %}

<!-- Equivalente a: <div class="actions mt"><a class="btn primary" href="?r=order/create">â• Crear nuevo pedido</a></div> -->
<div class="actions mt">
  <a class="btn primary" href="{% url 'order_create' %}" style="font-size: 1.2em; padding: 1rem 2rem;">
    ğŸš€ Crear nuevo pedido con patrones
  </a>
</div>

<!-- InformaciÃ³n adicional para desarrolladores -->
<div class="note mt">
  <h3>ğŸ› ï¸ Para Desarrolladores</h3>
  <p><strong>DemostraciÃ³n completa:</strong> Al crear un pedido verÃ¡s logs detallados en la consola del servidor mostrando cada patrÃ³n en acciÃ³n.</p>
  <p><strong>CÃ³digo fuente:</strong> Revisa <code>orders/services.py</code> para ver la implementaciÃ³n completa de los patrones.</p>
  <p><strong>Base de datos:</strong> Las notificaciones se guardan en la tabla <code>notifications</code> para auditorÃ­a.</p>
  <p><strong>Extensibilidad:</strong> FÃ¡cil agregar nuevos proveedores (Adapter), estrategias (Strategy) u observadores (Observer).</p>
</div>
{% endblock %}